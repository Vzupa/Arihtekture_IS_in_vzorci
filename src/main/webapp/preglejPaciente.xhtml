<!DOCTYPE html>
<html
        xmlns:h="http://xmlns.jcp.org/jsf/html"
        xmlns:f="http://xmlns.jcp.org/jsf/core">

<h:head>
    <meta charset="UTF-8"/>
    <title>Vsi pacienti</title>
</h:head>

<h:body>
    <f:view>
        <h:form>
            Zdravniki:
            [<a href="#{facesContext.externalContext.applicationContextPath}/faces/preglejZdravnike.xhtml">All</a> |
            <a href="#{facesContext.externalContext.applicationContextPath}/faces/dodajZdravnika.xhtml">Add new </a>]
            Pacienti:
            [<a href="#{facesContext.externalContext.applicationContextPath}/faces/preglejPaciente.xhtml">All</a> |
            <a href="#{facesContext.externalContext.applicationContextPath}/faces/dodajPacienta.xhtml">Add new </a>]
            <hr />

            <h:dataTable value="#{pacient.allPacienti}" var="o">
                <h:column>
                    <f:facet name="header">Email</f:facet>
                    <h:link value="#{o.email}" outcome="detailsPacient">
                        <f:param name="email" value="#{o.email}"></f:param>
                    </h:link>
                </h:column>
                <h:column>
                    <f:facet name="header">Priimek</f:facet>
                    #{o.priimek}
                </h:column>
                <h:column>
                    <f:facet name="header">Ime</f:facet>
                    #{o.ime}
                </h:column>
                <h:column>
                    <f:facet name="header">Rojstni datum</f:facet>
                    #{o.rojstniDatum}
                </h:column>
                <h:column>
                    <f:facet name="header">Posebnosti</f:facet>
                    #{o.posebnosti}
                </h:column>
                <h:column>
                    <h:link value="Edit" outcome="editPacient">
                        <f:param name="email" value="#{o.email}" />
                    </h:link> |
                    <h:commandLink value="Delete" onclick="confirmDelete(event)" actionListener="#{pacient.deletePacient(o)}"></h:commandLink>
                </h:column>
            </h:dataTable>
            <script>
                function confirmDelete(event) {
                    if (!confirm("Are you sure you want to delete this pacient?")) {
                        event.preventDefault();
                    }
                }
            </script>

        </h:form>
    </f:view>
</h:body>

</html>
